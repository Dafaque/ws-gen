// Code generated by wsgen. DO NOT EDIT.
package api
import (
    "github.com/Dafaque/ws-gen/examples/gen/iface"
    "github.com/Dafaque/ws-gen/examples/gen/model"
    
    "github.com/gorilla/websocket" 
)

type MessageSender struct {
    conn *websocket.Conn
    coder iface.Coder
}

func NewMessageSender(conn *websocket.Conn, coder iface.Coder) *MessageSender {
    return &MessageSender{conn: conn, coder: coder}
}

func (c *MessageSender) send(msg interface{}) error {
    data, err := c.coder.Marshal(msg)
    if err != nil {
        return err
    }

    errWrite := c.conn.WriteMessage(websocket.BinaryMessage, data)
    if errWrite != nil {
        return errWrite
    }
    return nil
}
// Sends TextMessage message
// To instance TextMessage message use model.NewTextMessage method
func (c *MessageSender) SendTextMessage(msg model.TextMessage) error {
    return c.send(msg)
}
// Sends ChatEvent message
// To instance ChatEvent message use model.NewChatEvent method
func (c *MessageSender) SendChatEvent(msg model.ChatEvent) error {
    return c.send(msg)
}